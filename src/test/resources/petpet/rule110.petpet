board = range(0,100).map(fun(x) rand() < 0.5)
board2 = board.copy()
printBoard = fun(board) {
    x = ""
    board.each(fun(z) x = x + if z "X" else "_")
    print(x)
}
printBoard(board)
i = 0
while (i = i + 1) < 1000 {
    board2.eachIndexed(fun(i, v) {
        board2[i] = if board[i-1]
            board[i] != board[i+1]
        else
            board[i] || board[i+1]
    })
    printBoard(board2)

    temp = board
    board = board2
    board2 = temp
}